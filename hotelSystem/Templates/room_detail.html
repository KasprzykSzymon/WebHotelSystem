{% extends 'base.html' %}

{% block header %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/styles_room_detail.css' %}">
    <title>Szczegóły pokoju</title>
{% endblock %}

{% block content %}
<div class="kontener">
    <h1>{{ room.name }}</h1>
    <div class="room-detail">
        {% if room.images.first %}
            <img src="{{ room.images.first.image.url }}" alt="{{ room.name }}" class="lokalizacja-img">
        {% else %}
            <img src="{% static 'images/default-room.jpg' %}" alt="Default room image" class="lokalizacja-img">
        {% endif %}
        <div class="room-info">
            <p><strong>Typ pokoju: </strong>{{ room.get_room_type_display }}</p>
            <p><strong>Cena za noc: </strong>{{ room.price_per_night }} zł</p>
            
            <!-- Łóżka: Ikony + opis -->
            <p><strong>Łóżka:</strong>
                <span class="icon-container">
                    {% for bed in single_beds %}
                        <span class="icon">
                            <img src="{% static 'icons/single-bed.png' %}" alt="Single bed">
                        </span>
                    {% endfor %}
                    {% for bed in double_beds %}
                        <span class="icon">
                            <img src="{% static 'icons/double-bed.png' %}" alt="Double bed">
                        </span>
                    {% endfor %}
                </span>
            </p>

            <!-- Typ łóżek: Tekst w tej samej linii -->
            <p><strong>Typ łóżek:</strong> 
                {{ single_beds_text }}{% if double_beds_text %}, {{ double_beds_text }}{% endif %}
            </p>

            <p><strong>Całkowita cena za pobyt: </strong>{{ room.price_per_night|floatformat:2 }} zł za noc × {{ number_of_nights }} nocy = {{ total_price|floatformat:2 }} zł</p>

            <a href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=YOUR_PAYPAL_EMAIL&item_name={{ room.name }}&amount={{ total_price }}&currency_code=PLN&return={{ request.build_absolute_uri }}?arrival_date={{ arrival_date }}&departure_date={{ departure_date }}&adults={{ adults }}&children={{ children }}&room_type={{ room_type }}&min_price={{ min_price }}&max_price={{ max_price }}&sort_order={{ sort_order }}" class="lokalizacja-button">Zarezerwuj i zapłać przez PayPal</a>
        </div>
    </div>
</div>
{% endblock %}
